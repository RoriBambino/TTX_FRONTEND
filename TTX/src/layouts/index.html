<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Threat Agents Drag & Drop</title>
  </head>
  <body
    style="
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 20px;
    "
  >
    <!-- Main container -->
    <div style="display: flex; justify-content: space-between">
      <!-- LEFT SIDE: Threat Agents Box -->
      <div
        id="threatBox"
        style="
          width: 45%;
          height: 400px;
          border: 2px dashed #666;
          background-color: #fff;
          border-radius: 10px;
          padding: 10px;
          cursor: pointer;
        "
        onclick="openModal()"
        ondrop="drop(event)"
        ondragover="allowDrop(event)"
      >
        <h3
          style="
            text-align: center;
            background-color: #0078d7;
            color: white;
            padding: 10px;
            border-radius: 8px;
          "
        >
          Threat Agents
        </h3>
        <p style="text-align: center; color: #777">(Drag cards here)</p>
      </div>

      <!-- RIGHT SIDE: Draggable Cards -->
      <div
        id="cardContainer"
        style="width: 45%; display: flex; flex-direction: column; gap: 10px"
      >
        <div
          id="card1"
          draggable="true"
          ondragstart="drag(event)"
          style="
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: grab;
          "
        >
          <strong>Card 1:</strong> Insider Threat
        </div>
        <div
          id="card2"
          draggable="true"
          ondragstart="drag(event)"
          style="
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: grab;
          "
        >
          <strong>Card 2:</strong> External Hacker
        </div>
        <div
          id="card3"
          draggable="true"
          ondragstart="drag(event)"
          style="
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: grab;
          "
        >
          <strong>Card 3:</strong> Malware Injection
        </div>
      </div>
    </div>

    <!-- Modal -->
    <div
      id="modal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
      "
    >
      <div
        style="
          background-color: white;
          width: 400px;
          max-height: 500px;
          border-radius: 10px;
          padding: 20px;
          overflow-y: auto;
          position: relative;
        "
      >
        <span
          onclick="closeModal()"
          style="
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 20px;
            cursor: pointer;
          "
          >&times;</span
        >
        <h3 style="text-align: center">Threat Agents List</h3>
        <div id="modalContent"></div>
      </div>
    </div>

    <script>
      let droppedCards = []; // store the IDs of dropped cards

      function allowDrop(ev) {
        ev.preventDefault();
      }

      function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
      }

      function drop(ev) {
        ev.preventDefault();
        const data = ev.dataTransfer.getData("text");
        const card = document.getElementById(data);

        if (!droppedCards.includes(data)) {
          droppedCards.push(data);
          card.style.display = "none"; // hide the card from the right side
        }
      }

      function openModal() {
        const modal = document.getElementById("modal");
        const modalContent = document.getElementById("modalContent");

        if (droppedCards.length === 0) {
          modalContent.innerHTML =
            "<p style='text-align:center; color:#777;'>No cards added yet.</p>";
        } else {
          modalContent.innerHTML = droppedCards
            .map((id) => {
              const card = document.getElementById(id);
              return `<div style='padding:10px; border:1px solid #ccc; border-radius:8px; background:#f9f9f9; margin-bottom:10px;'>
                ${card.innerHTML}
              </div>`;
            })
            .join("");
        }

        modal.style.display = "flex";
      }

      function closeModal() {
        document.getElementById("modal").style.display = "none";
      }
    </script>
  </body>
</html>
